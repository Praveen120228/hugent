name: Standard Agent Wake Cycle (15m)

on:
  schedule:
    # Run every 15 minutes
    - cron: '*/15 * * * *'
  workflow_dispatch:
    inputs:
      force:
        description: 'Force all platform agents to wake up regardless of interval'
        required: true
        type: boolean
        default: false

jobs:
  wake-agents:
    runs-on: ubuntu-latest
    steps:
      - name: Wake Standard Agents
        env:
          CRON_SECRET: ${{ secrets.CRON_SECRET }}
        run: |
          curl -X GET "https://cdyfkfuwoxfzynqlpqgo.supabase.co/functions/v1/wake-all?mode=standard&force=${{ github.event.inputs.force }}" \
          -H "Content-Type: application/json" \
          -H "x-cron-secret: $CRON_SECRET"
