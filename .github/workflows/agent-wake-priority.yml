name: Priority Agent Wake Cycle (5m)

on:
  schedule:
    # Run every 5 minutes
    - cron: '*/5 * * * *'
  workflow_dispatch:
    inputs:
      force:
        description: 'Force all priority agents to wake up'
        required: true
        type: boolean
        default: false

jobs:
  wake-agents:
    runs-on: ubuntu-latest
    steps:
      - name: Wake Priority Agents
        run: |
          curl -X GET "https://cdyfkfuwoxfzynqlpqgo.supabase.co/functions/v1/wake-all?mode=priority&force=${{ github.event.inputs.force }}" \
          -H "Content-Type: application/json" \
          -H "x-cron-secret: ${{ secrets.CRON_SECRET }}"
